"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const config_1 = require("@schematics/angular/utility/config");
const schematics_1 = require("@angular-devkit/schematics");
function momentumApp(options) {
    return (host, context) => {
        setupOptions(host, options);
        const workspace = config_1.getWorkspace(host);
        options.project = 'application';
        var project = workspace.projects[options.project];
        context.logger.info(`MOMENTUM OPTIONS: ${JSON.stringify(options)}...`);
        return schematics_1.chain([
            schematics_1.externalSchematic('ng-momentum', 'ng-add', {
            // project: options.project
            }),
            schematics_1.externalSchematic('ng-momentum', 'scaffold', {
                spec: false,
                force: true
            })
        ]);
    };
}
exports.momentumApp = momentumApp;
function setupOptions(host, options) {
    var lcuFile = host.get('lcu.json');
    var lcuJson = lcuFile ? JSON.parse(lcuFile.content.toString('utf8')) : {};
    const workspace = config_1.getWorkspace(host);
    options.scope = lcuJson.templates.scope;
    options.workspace = lcuJson.templates.workspace;
    options.project = options.project ? options.project :
        workspace.defaultProject ? workspace.defaultProject : Object.keys(workspace.projects)[0];
    options.name = options.name;
    return host;
}
//# sourceMappingURL=index.js.map