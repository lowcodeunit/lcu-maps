!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/flex-layout"),require("@lcu/common"),require("@angular/common/http"),require("util"),require("@angular/cdk/tree"),require("@angular/material/tree"),require("rxjs"),require("ngx-markdown")):"function"==typeof define&&define.amd?define("@lowcodeunit/lcu-documentation-common",["exports","@angular/core","@angular/forms","@angular/flex-layout","@lcu/common","@angular/common/http","util","@angular/cdk/tree","@angular/material/tree","rxjs","ngx-markdown"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).lowcodeunit=e.lowcodeunit||{},e.lowcodeunit["lcu-documentation-common"]={}),e.ng.core,e.ng.forms,e.ng.flexLayout,e.common,e.ng.common.http,e.util,e.ng.cdk.tree,e.ng.material.tree,e.rxjs,e.ngxMarkdown)}(this,(function(e,t,n,o,r,i,a,c,u,l,s){"use strict";var d=function(){};d.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new d},token:d,providedIn:"root"}),d.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],d.ctorParameters=function(){return[]};var f=function(){},p=function(e,t,n,o){this.expandable=e,this.filename=t,this.level=n,this.path=o},h=(new s.MarkedRenderer).heading;function g(){var e=new s.MarkedRenderer,t=0;return e.heading=function(e,n,o){return t=n,"<h"+n+">"+e+"</h"+n+">\n"},e.link=function(e,t,n){return'<a title="'+(t||"")+'" href="'+e+'">'+(n||t||e)+"</a>"},e.paragraph=function(e){var n="";switch(t){case 1:case 2:n="mat-body-3";break;case 3:case 4:n="mat-body-2";break;default:n="mat-body-1"}return'<p class="'+n+'">'+e+"</p>"},{renderer:e}}var m=require("path-browserify"),y=function(){function e(e){this.http=e,this.DocChange=new t.EventEmitter,this.TreeFlattener=new u.MatTreeFlattener(this.Transformer,this.getLevel,this.isExpandable,this.getChildren),this.TreeControl=new c.FlatTreeControl(this.getLevel,this.isExpandable),this.DataSource=new u.MatTreeFlatDataSource(this.TreeControl,this.TreeFlattener)}return Object.defineProperty(e.prototype,"Docs",{set:function(e){var t=this;this.http.get(m.join(e,"lcu.docs.json")).subscribe((function(e){t.Config=e,t.Reload()}))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.Reload()},e.prototype.onClick=function(e){if(e&&e.href&&e.href.endsWith(".md")){var t=e.href.replace(document.getElementsByTagName("base")[0].href,"");return console.log("Going to doc: "+t),this.GoToDoc(t),!1}},e.prototype.BuildFileTree=function(){this.DataSource.data=this.buildFileTree(this.Config.Docs,0)},e.prototype.FindDoc=function(e){return this.Config.Docs.find((function(t){return t.Path===e}))},e.prototype.GoToDoc=function(e){var t=a.isString(e)?e:e.Path;this.ActiveDocPath!==t&&(this.ActiveDocPath=t),this.calculateActiveDocData(),this.DocChange.emit({DocPath:t})},e.prototype.HasChild=function(e,t){return t.expandable},e.prototype.Reload=function(){this.Config&&this.Config.Docs&&this.Config.Docs.length>0&&(this.BuildFileTree(),this.GoToDoc(this.ActiveDocPath||this.Config.DefaultDocPath||this.Config.Docs[0]))},e.prototype.Transformer=function(e){return new p(!!e.children,e.filename,e.level,e.path)},e.prototype.buildFileTree=function(e,t){var n=this;return e.reduce((function(e,o){var r=n.buildFileNodeFromDoc(o,t);return e.concat(r)}),[])},e.prototype.buildFileNodeFromDoc=function(e,t,n){var o=new f;null!=e&&(o.filename=e.Title,o.level=t,!n&&e.Children&&e.Children.length>0?(o.children=this.buildFileTree(e.Children,t+1),Object.assign({},e).Children=null):o.path=e.Path);return o},e.prototype.calculateActiveDocData=function(){this.Config&&this.ActiveDocPath?this.ActiveDocData=m.join(this.Config.LocationRoot,this.ActiveDocPath):this.ActiveDocData=null},e.prototype.getLevel=function(e){return e.level},e.prototype.isExpandable=function(e){return e.expandable},e.prototype.getChildren=function(e){return l.of(e.children)},e}();y.decorators=[{type:t.Component,args:[{selector:"lcu-markdown-docs",template:'<div fxLayout="row" *ngIf="Config">\r\n  <div fxFlex="0 1 auto">\r\n    <mat-tree [dataSource]="DataSource" [treeControl]="TreeControl">\r\n      <mat-tree-node\r\n        *matTreeNodeDef="let node"\r\n        matTreeNodeToggle\r\n        [matTreeNodePadding]="Config.IndentVariant * node.level"\r\n      >\r\n        <button mat-icon-button disabled></button>\r\n\r\n        <a mat-button (click)="GoToDoc(node.path)">{{ node.filename }}</a>\r\n      </mat-tree-node>\r\n\r\n      <mat-tree-node\r\n        *matTreeNodeDef="let node; when: HasChild"\r\n        [matTreeNodePadding]="Config.IndentVariant * node.level"\r\n      >\r\n        <button\r\n          mat-icon-button\r\n          matTreeNodeToggle\r\n          [attr.aria-label]="\'toggle \' + node.filename"\r\n        >\r\n          <mat-icon class="mat-icon-rtl-mirror">\r\n            {{ TreeControl.isExpanded(node) ? "expand_more" : "chevron_right" }}\r\n          </mat-icon>\r\n        </button>\r\n\r\n        <a mat-button matTreeNodeToggle>{{ node.filename }}</a>\r\n      </mat-tree-node>\r\n    </mat-tree>\r\n  </div>\r\n\r\n  <div fxFlex="auto">\r\n    <div class="push-right">\r\n      <ng-container *ngIf="!!ActiveDocData">\r\n        <markdown [src]="ActiveDocData"></markdown>\r\n      </ng-container>\r\n    </div>\r\n  </div>\r\n</div>\r\n',styles:[":host .mat-tree{padding:1rem}"]}]}],y.ctorParameters=function(){return[{type:i.HttpClient}]},y.propDecorators={Config:[{type:t.Input,args:["config"]}],Docs:[{type:t.Input,args:["docs"]}],DocChange:[{type:t.Output,args:["docChange"]}],onClick:[{type:t.HostListener,args:["click",["$event.target"]]}]};var v=g,D=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[d]}},e}();D.decorators=[{type:t.NgModule,args:[{declarations:[y],imports:[r.FathymSharedModule,n.FormsModule,n.ReactiveFormsModule,o.FlexLayoutModule,r.MaterialModule,i.HttpClientModule,s.MarkdownModule.forRoot({loader:i.HttpClient,markedOptions:{provide:s.MarkedOptions,useFactory:v}})],exports:[y],entryComponents:[]}]}];var b=function(e){Object.assign(this,e)},C=function(e){Object.assign(this,e)},T=function(e){Object.assign(this,e)},w=function(){},x=function(e,t){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};Object.create;Object.create;var k=function(e){function t(t){var n=e.call(this,t)||this;return n.injector=t,n}return function(e,t){function n(){this.constructor=e}x(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.GetDocsById=function(e){this.State.Loading=!0,this.Execute({Arguments:{DocsId:e},Type:"get-docs-by-id"})},t.prototype.loadStateKey=function(){return"main"},t.prototype.loadStateName=function(){return"docs"},t}(r.StateContext);k.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new k(t.ɵɵinject(t.INJECTOR))},token:k,providedIn:"root"}),k.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],k.ctorParameters=function(){return[{type:t.Injector}]};var F=function(){function e(){}return e.upperDocs=function(e){return e.toUpperCase()},e}();e.DocsManagerContext=k,e.DocsModel=w,e.DocsService=d,e.DocsUtils=F,e.FileFlatNode=p,e.FileNode=f,e.LcuDocsComponent=y,e.LcuDocumentationModule=D,e.LcuMarkdownDoc=C,e.LcuMarkdownDocChangeEvent=T,e.LcuMarkdownDocsConfig=b,e.markedOptionsFactory=g,e.originalHeading=h,e.ɵ0=v,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=lowcodeunit-lcu-documentation-common.umd.min.js.map