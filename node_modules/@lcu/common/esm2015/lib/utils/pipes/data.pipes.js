import { Pipe } from '@angular/core';
import { DatePipe, DecimalPipe, PercentPipe } from '@angular/common';
import { DataPipeConstants } from '../constants/data-pipe.constants';
import { TemperatureConversion } from '../conversion/temperature.conversion';
/**
 * Pipes for datagrid values
 */
export class DataPipes {
    transform(value, args) {
        if (!args) {
            return value;
        }
        /**
         * Return date M/d/YYYY
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_SHORTDATE) {
            const pipe = new DatePipe('en-US');
            const transformed = pipe.transform(value, DataPipeConstants.DATE_SHORTDATE);
            return transformed;
        }
        /**
         * Return date
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_DATE) {
            const pipe = new DatePipe('en-US');
            const transformed = pipe.transform(value, DataPipeConstants.DATE_FMT);
            return transformed;
        }
        /**
         * Return date MMM d, y
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_MEDIUMDATE) {
            const pipe = new DatePipe('en-US');
            const transformed = pipe.transform(value, 'MMM d, y');
            return transformed;
        }
        /**
         * Return date 'EEEE, MMMM d, y'
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_FULLDATE) {
            const pipe = new DatePipe('en-US');
            const transformed = pipe.transform(value, DataPipeConstants.DATE_FULLDATE);
            return transformed;
        }
        /**
         * Return date from epoch value
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_EPOCH) {
            const pipe = new DatePipe('en-US');
            const transformed = pipe.transform(value * 1000, DataPipeConstants.DATE_DAY_TIME);
            return transformed;
        }
        /**
         * Return number with decimal
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_NUMBER) {
            const pipe = new DecimalPipe('en-US');
            const transformed = pipe.transform(value, '1.0-0');
            return transformed;
        }
        /**
         * Return return number with mph appended
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_MPH) {
            const pipe = new DecimalPipe('en-US');
            const transformed = pipe.transform(value, '1.0-0');
            return transformed + ' mph';
        }
        /**
         * Return percentage
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_PERCENTAGE) {
            const pipe = new PercentPipe('en-US');
            const transformed = pipe.transform(value);
            return transformed;
        }
        /**
         * Return percentage
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_PERCENTAGE_DECIMAL) {
            const pipe = new PercentPipe('en-US');
            const transformed = pipe.transform(value, '2.2-2');
            return transformed;
        }
        /**
         * Return percentage with two decimals
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_DECIMAL_TWO) {
            const pipe = new DecimalPipe('en-US');
            const transformed = pipe.transform(value, '1.2-2');
            return transformed;
        }
        /**
         * Return percentage with four decimals
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_DECIMAL_FOUR) {
            const pipe = new DecimalPipe('en-US');
            const transformed = pipe.transform(value, '1.4-4');
            return transformed;
        }
        /**
         * Return temperature in fahrenheit, append °F
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_TEMP_FAHRENHEIT) {
            const pipe = new DecimalPipe('en-US');
            // const temperature = (value * 32) + 1.8;
            const transformed = pipe.transform(value, '1.0-0');
            return transformed + ' °F';
        }
        /**
         * Return temperature in kelvin, append °K
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_TEMP_KELVIN) {
            const pipe = new DecimalPipe('en-US');
            // const temperature = (value * 32) + 1.8;
            const temperature = TemperatureConversion.FahrenheitToKelvin(value);
            const transformed = pipe.transform(temperature, '1.0-0');
            return transformed + ' °K';
        }
        /**
         * Return temperature in celsius, append °C
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_TEMP_CELSIUS) {
            const pipe = new DecimalPipe('en-US');
            const temperature = TemperatureConversion.FahrenheitToCelsius(value);
            const transformed = pipe.transform(temperature, '1.0-0');
            return transformed + ' °C';
        }
        /**
         * IF none of the above work, return the original value
         */
        return value;
    }
}
DataPipes.decorators = [
    { type: Pipe, args: [{
                name: 'dataPipes'
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS5waXBlcy5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BsY3UvY29tbW9uLyIsInNvdXJjZXMiOlsibGliL3V0aWxzL3BpcGVzL2RhdGEucGlwZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFDcEQsT0FBTyxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDckUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDckUsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sc0NBQXNDLENBQUM7QUFPN0U7O0dBRUc7QUFDSCxNQUFNLE9BQU8sU0FBUztJQUNwQixTQUFTLENBQUMsS0FBVSxFQUFFLElBQVU7UUFDOUIsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNULE9BQU8sS0FBSyxDQUFDO1NBQ2Q7UUFFRDs7V0FFRztRQUNILElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRSxLQUFLLGlCQUFpQixDQUFDLGNBQWMsRUFBRTtZQUMzRCxNQUFNLElBQUksR0FBRyxJQUFJLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNuQyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxpQkFBaUIsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUM1RSxPQUFPLFdBQVcsQ0FBQztTQUNwQjtRQUVEOztXQUVHO1FBQ0gsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFLEtBQUssaUJBQWlCLENBQUMsU0FBUyxFQUFFO1lBQ3RELE1BQU0sSUFBSSxHQUFHLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ25DLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLGlCQUFpQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3RFLE9BQU8sV0FBVyxDQUFDO1NBQ3BCO1FBSUQ7O1dB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LEVBQUUsT0FBTyxDQUFDLENBQUM7WUFFekQsT0FBTyxXQUFXLEdBQUcsS0FBSyxDQUFDO1NBQzVCO1FBR0Q7O1dBRUc7UUFDSCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7OztZQXpKRixJQUFJLFNBQUM7Z0JBQ0osSUFBSSxFQUFFLFdBQVc7YUFDbEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQaXBlLCBQaXBlVHJhbnNmb3JtIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IERhdGVQaXBlLCBEZWNpbWFsUGlwZSwgUGVyY2VudFBpcGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQgeyBEYXRhUGlwZUNvbnN0YW50cyB9IGZyb20gJy4uL2NvbnN0YW50cy9kYXRhLXBpcGUuY29uc3RhbnRzJztcclxuaW1wb3J0IHsgVGVtcGVyYXR1cmVDb252ZXJzaW9uIH0gZnJvbSAnLi4vY29udmVyc2lvbi90ZW1wZXJhdHVyZS5jb252ZXJzaW9uJztcclxuXHJcblxyXG5AUGlwZSh7XHJcbiAgbmFtZTogJ2RhdGFQaXBlcydcclxufSlcclxuXHJcbi8qKlxyXG4gKiBQaXBlcyBmb3IgZGF0YWdyaWQgdmFsdWVzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGF0YVBpcGVzIGltcGxlbWVudHMgUGlwZVRyYW5zZm9ybSB7XHJcbiAgdHJhbnNmb3JtKHZhbHVlOiBhbnksIGFyZ3M/OiBhbnkpOiBhbnkge1xyXG4gICAgaWYgKCFhcmdzKSB7XHJcbiAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBkYXRlIE0vZC9ZWVlZXHJcbiAgICAgKi9cclxuICAgIGlmIChhcmdzLnRvTG93ZXJDYXNlKCkgPT09IERhdGFQaXBlQ29uc3RhbnRzLlBJUEVfU0hPUlREQVRFKSB7XHJcbiAgICAgIGNvbnN0IHBpcGUgPSBuZXcgRGF0ZVBpcGUoJ2VuLVVTJyk7XHJcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gcGlwZS50cmFuc2Zvcm0odmFsdWUsIERhdGFQaXBlQ29uc3RhbnRzLkRBVEVfU0hPUlREQVRFKTtcclxuICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGRhdGVcclxuICAgICAqL1xyXG4gICAgaWYgKGFyZ3MudG9Mb3dlckNhc2UoKSA9PT0gRGF0YVBpcGVDb25zdGFudHMuUElQRV9EQVRFKSB7XHJcbiAgICAgIGNvbnN0IHBpcGUgPSBuZXcgRGF0ZVBpcGUoJ2VuLVVTJyk7XHJcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gcGlwZS50cmFuc2Zvcm0odmFsdWUsIERhdGFQaXBlQ29uc3RhbnRzLkRBVEVfRk1UKTtcclxuICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGRhdGUgTU1NIGQsIHlcclxuICAgICAqL1xyXG4gICAgaWYgKGFyZ3MudG9Mb3dlckNhc2UoKSA9PT0gRGF0YVBpcGVDb25zdGFudHMuUElQRV9NRURJVU1EQVRFKSB7XHJcbiAgICAgIGNvbnN0IHBpcGUgPSBuZXcgRGF0ZVBpcGUoJ2VuLVVTJyk7XHJcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gcGlwZS50cmFuc2Zvcm0odmFsdWUsICdNTU0gZCwgeScpO1xyXG4gICAgICByZXR1cm4gdHJhbnNmb3JtZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gZGF0ZSAnRUVFRSwgTU1NTSBkLCB5J1xyXG4gICAgICovXHJcbiAgICBpZiAoYXJncy50b0xvd2VyQ2FzZSgpID09PSBEYXRhUGlwZUNvbnN0YW50cy5QSVBFX0ZVTExEQVRFKSB7XHJcbiAgICAgIGNvbnN0IHBpcGUgPSBuZXcgRGF0ZVBpcGUoJ2VuLVVTJyk7XHJcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gcGlwZS50cmFuc2Zvcm0odmFsdWUsIERhdGFQaXBlQ29uc3RhbnRzLkRBVEVfRlVMTERBVEUpO1xyXG4gICAgICByZXR1cm4gdHJhbnNmb3JtZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gZGF0ZSBmcm9tIGVwb2NoIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIGlmIChhcmdzLnRvTG93ZXJDYXNlKCkgPT09IERhdGFQaXBlQ29uc3RhbnRzLlBJUEVfRVBPQ0gpIHtcclxuICAgICAgY29uc3QgcGlwZSA9IG5ldyBEYXRlUGlwZSgnZW4tVVMnKTtcclxuICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSBwaXBlLnRyYW5zZm9ybSh2YWx1ZSAqIDEwMDAsIERhdGFQaXBlQ29uc3RhbnRzLkRBVEVfREFZX1RJTUUpO1xyXG4gICAgICByZXR1cm4gdHJhbnNmb3JtZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gbnVtYmVyIHdpdGggZGVjaW1hbFxyXG4gICAgICovXHJcbiAgICBpZiAoYXJncy50b0xvd2VyQ2FzZSgpID09PSBEYXRhUGlwZUNvbnN0YW50cy5QSVBFX05VTUJFUikge1xyXG4gICAgICBjb25zdCBwaXBlID0gbmV3IERlY2ltYWxQaXBlKCdlbi1VUycpO1xyXG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IHBpcGUudHJhbnNmb3JtKHZhbHVlLCAnMS4wLTAnKTtcclxuICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHJldHVybiBudW1iZXIgd2l0aCBtcGggYXBwZW5kZWRcclxuICAgICAqL1xyXG4gICAgaWYgKGFyZ3MudG9Mb3dlckNhc2UoKSA9PT0gRGF0YVBpcGVDb25zdGFudHMuUElQRV9NUEgpIHtcclxuICAgICAgY29uc3QgcGlwZSA9IG5ldyBEZWNpbWFsUGlwZSgnZW4tVVMnKTtcclxuICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSBwaXBlLnRyYW5zZm9ybSh2YWx1ZSwgJzEuMC0wJyk7XHJcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1lZCArICcgbXBoJztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBwZXJjZW50YWdlXHJcbiAgICAgKi9cclxuICAgIGlmIChhcmdzLnRvTG93ZXJDYXNlKCkgPT09IERhdGFQaXBlQ29uc3RhbnRzLlBJUEVfUEVSQ0VOVEFHRSkge1xyXG4gICAgICBjb25zdCBwaXBlID0gbmV3IFBlcmNlbnRQaXBlKCdlbi1VUycpO1xyXG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IHBpcGUudHJhbnNmb3JtKHZhbHVlKTtcclxuICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHBlcmNlbnRhZ2VcclxuICAgICAqL1xyXG4gICAgaWYgKGFyZ3MudG9Mb3dlckNhc2UoKSA9PT0gRGF0YVBpcGVDb25zdGFudHMuUElQRV9QRVJDRU5UQUdFX0RFQ0lNQUwpIHtcclxuICAgICAgY29uc3QgcGlwZSA9IG5ldyBQZXJjZW50UGlwZSgnZW4tVVMnKTtcclxuICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSBwaXBlLnRyYW5zZm9ybSh2YWx1ZSwgJzIuMi0yJyk7XHJcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBwZXJjZW50YWdlIHdpdGggdHdvIGRlY2ltYWxzXHJcbiAgICAgKi9cclxuICAgIGlmIChhcmdzLnRvTG93ZXJDYXNlKCkgPT09IERhdGFQaXBlQ29uc3RhbnRzLlBJUEVfREVDSU1BTF9UV08pIHtcclxuICAgICAgY29uc3QgcGlwZSA9IG5ldyBEZWNpbWFsUGlwZSgnZW4tVVMnKTtcclxuICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSBwaXBlLnRyYW5zZm9ybSh2YWx1ZSwgJzEuMi0yJyk7XHJcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBwZXJjZW50YWdlIHdpdGggZm91ciBkZWNpbWFsc1xyXG4gICAgICovXHJcbiAgICBpZiAoYXJncy50b0xvd2VyQ2FzZSgpID09PSBEYXRhUGlwZUNvbnN0YW50cy5QSVBFX0RFQ0lNQUxfRk9VUikge1xyXG4gICAgICBjb25zdCBwaXBlID0gbmV3IERlY2ltYWxQaXBlKCdlbi1VUycpO1xyXG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IHBpcGUudHJhbnNmb3JtKHZhbHVlLCAnMS40LTQnKTtcclxuICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHRlbXBlcmF0dXJlIGluIGZhaHJlbmhlaXQsIGFwcGVuZCDCsEZcclxuICAgICAqL1xyXG4gICAgaWYgKGFyZ3MudG9Mb3dlckNhc2UoKSA9PT0gRGF0YVBpcGVDb25zdGFudHMuUElQRV9URU1QX0ZBSFJFTkhFSVQpIHtcclxuICAgICAgY29uc3QgcGlwZSA9IG5ldyBEZWNpbWFsUGlwZSgnZW4tVVMnKTtcclxuICAgICAgLy8gY29uc3QgdGVtcGVyYXR1cmUgPSAodmFsdWUgKiAzMikgKyAxLjg7XHJcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gcGlwZS50cmFuc2Zvcm0odmFsdWUsICcxLjAtMCcpO1xyXG5cclxuICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkICsgJyDCsEYnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHRlbXBlcmF0dXJlIGluIGtlbHZpbiwgYXBwZW5kIMKwS1xyXG4gICAgICovXHJcbiAgICBpZiAoYXJncy50b0xvd2VyQ2FzZSgpID09PSBEYXRhUGlwZUNvbnN0YW50cy5QSVBFX1RFTVBfS0VMVklOKSB7XHJcbiAgICAgIGNvbnN0IHBpcGUgPSBuZXcgRGVjaW1hbFBpcGUoJ2VuLVVTJyk7XHJcbiAgICAgIC8vIGNvbnN0IHRlbXBlcmF0dXJlID0gKHZhbHVlICogMzIpICsgMS44O1xyXG4gICAgICBjb25zdCB0ZW1wZXJhdHVyZSA9IFRlbXBlcmF0dXJlQ29udmVyc2lvbi5GYWhyZW5oZWl0VG9LZWx2aW4odmFsdWUpO1xyXG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IHBpcGUudHJhbnNmb3JtKHRlbXBlcmF0dXJlLCAnMS4wLTAnKTtcclxuXHJcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1lZCArICcgwrBLJztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiB0ZW1wZXJhdHVyZSBpbiBjZWxzaXVzLCBhcHBlbmQgwrBDXHJcbiAgICAgKi9cclxuICAgIGlmIChhcmdzLnRvTG93ZXJDYXNlKCkgPT09IERhdGFQaXBlQ29uc3RhbnRzLlBJUEVfVEVNUF9DRUxTSVVTKSB7XHJcbiAgICAgIGNvbnN0IHBpcGUgPSBuZXcgRGVjaW1hbFBpcGUoJ2VuLVVTJyk7XHJcbiAgICAgIGNvbnN0IHRlbXBlcmF0dXJlID0gVGVtcGVyYXR1cmVDb252ZXJzaW9uLkZhaHJlbmhlaXRUb0NlbHNpdXModmFsdWUpO1xyXG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IHBpcGUudHJhbnNmb3JtKHRlbXBlcmF0dXJlLCAnMS4wLTAnKTtcclxuXHJcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1lZCArICcgwrBDJztcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJRiBub25lIG9mIHRoZSBhYm92ZSB3b3JrLCByZXR1cm4gdGhlIG9yaWdpbmFsIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcbn1cclxuIl19