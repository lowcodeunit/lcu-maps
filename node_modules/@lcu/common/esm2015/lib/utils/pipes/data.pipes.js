import { __decorate } from "tslib";
import { Pipe } from '@angular/core';
import { DatePipe, DecimalPipe, PercentPipe } from '@angular/common';
import { DataPipeConstants } from '../constants/data-pipe.constants';
import { TemperatureConversion } from '../conversion/temperature.conversion';
let DataPipes = 
/**
 * Pipes for datagrid values
 */
class DataPipes {
    transform(value, args) {
        if (!args) {
            return value;
        }
        /**
         * Return date M/d/YYYY
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_SHORTDATE) {
            const pipe = new DatePipe('en-US');
            const transformed = pipe.transform(value, DataPipeConstants.DATE_SHORTDATE);
            return transformed;
        }
        /**
         * Return date
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_DATE) {
            const pipe = new DatePipe('en-US');
            const transformed = pipe.transform(value, DataPipeConstants.DATE_FMT);
            return transformed;
        }
        /**
         * Return date MMM d, y
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_MEDIUMDATE) {
            const pipe = new DatePipe('en-US');
            const transformed = pipe.transform(value, 'MMM d, y');
            return transformed;
        }
        /**
         * Return date 'EEEE, MMMM d, y'
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_FULLDATE) {
            const pipe = new DatePipe('en-US');
            const transformed = pipe.transform(value, DataPipeConstants.DATE_FULLDATE);
            return transformed;
        }
        /**
         * Return date from epoch value
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_EPOCH) {
            const pipe = new DatePipe('en-US');
            const transformed = pipe.transform(value * 1000, DataPipeConstants.DATE_DAY_TIME);
            return transformed;
        }
        /**
         * Return number with decimal
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_NUMBER) {
            const pipe = new DecimalPipe('en-US');
            const transformed = pipe.transform(value, '1.0-0');
            return transformed;
        }
        /**
         * Return return number with mph appended
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_MPH) {
            const pipe = new DecimalPipe('en-US');
            const transformed = pipe.transform(value, '1.0-0');
            return transformed + ' mph';
        }
        /**
         * Return percentage
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_PERCENTAGE) {
            const pipe = new PercentPipe('en-US');
            const transformed = pipe.transform(value);
            return transformed;
        }
        /**
         * Return percentage
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_PERCENTAGE_DECIMAL) {
            const pipe = new PercentPipe('en-US');
            const transformed = pipe.transform(value, '2.2-2');
            return transformed;
        }
        /**
         * Return percentage with two decimals
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_DECIMAL_TWO) {
            const pipe = new DecimalPipe('en-US');
            const transformed = pipe.transform(value, '1.2-2');
            return transformed;
        }
        /**
         * Return percentage with four decimals
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_DECIMAL_FOUR) {
            const pipe = new DecimalPipe('en-US');
            const transformed = pipe.transform(value, '1.4-4');
            return transformed;
        }
        /**
         * Return temperature in fahrenheit, append °F
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_TEMP_FAHRENHEIT) {
            const pipe = new DecimalPipe('en-US');
            // const temperature = (value * 32) + 1.8;
            const transformed = pipe.transform(value, '1.0-0');
            return transformed + ' °F';
        }
        /**
         * Return temperature in kelvin, append °K
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_TEMP_KELVIN) {
            const pipe = new DecimalPipe('en-US');
            // const temperature = (value * 32) + 1.8;
            const temperature = TemperatureConversion.FahrenheitToKelvin(value);
            const transformed = pipe.transform(temperature, '1.0-0');
            return transformed + ' °K';
        }
        /**
         * Return temperature in celsius, append °C
         */
        if (args.toLowerCase() === DataPipeConstants.PIPE_TEMP_CELSIUS) {
            const pipe = new DecimalPipe('en-US');
            const temperature = TemperatureConversion.FahrenheitToCelsius(value);
            const transformed = pipe.transform(temperature, '1.0-0');
            return transformed + ' °C';
        }
        /**
         * IF none of the above work, return the original value
         */
        return value;
    }
};
DataPipes = __decorate([
    Pipe({
        name: 'dataPipes'
    })
    /**
     * Pipes for datagrid values
     */
], DataPipes);
export { DataPipes };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS5waXBlcy5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BsY3UvY29tbW9uLyIsInNvdXJjZXMiOlsibGliL3V0aWxzL3BpcGVzL2RhdGEucGlwZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxJQUFJLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBQ3BELE9BQU8sRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3JFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQ3JFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBVTdFLElBQWEsU0FBUztBQUh0Qjs7R0FFRztBQUNILE1BQWEsU0FBUztJQUNwQixTQUFTLENBQUMsS0FBVSxFQUFFLElBQVU7UUFDOUIsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNULE9BQU8sS0FBSyxDQUFDO1NBQ2Q7UUFFRDs7V0FFRztRQUNILElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRSxLQUFLLGlCQUFpQixDQUFDLGNBQWMsRUFBRTtZQUMzRCxNQUFNLElBQUksR0FBRyxJQUFJLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNuQyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxpQkFBaUIsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUM1RSxPQUFPLFdBQVcsQ0FBQztTQUNwQjtRQUVEOztXQUVHO1FBQ0gsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFLEtBQUssaUJBQWlCLENBQUMsU0FBUyxFQUFFO1lBQ3RELE1BQU0sSUFBSSxHQUFHLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ25DLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLGlCQUFpQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3RFLE9BQU8sV0FBVyxDQUFDO1NB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QVMsQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFFekQsT0FBTyxXQUFXLEdBQUcsS0FBSyxDQUFDO1NBQzVCO1FBR0Q7O1dBRUc7UUFDSCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7Q0FDRixDQUFBO0FBbkpZLFNBQVM7SUFQckIsSUFBSSxDQUFDO1FBQ0osSUFBSSxFQUFFLFdBQVc7S0FDbEIsQ0FBQztJQUVGOztPQUVHO0dBQ1UsU0FBUyxDQW1KckI7U0FuSlksU0FBUyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBpcGUsIFBpcGVUcmFuc2Zvcm0gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgRGF0ZVBpcGUsIERlY2ltYWxQaXBlLCBQZXJjZW50UGlwZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7IERhdGFQaXBlQ29uc3RhbnRzIH0gZnJvbSAnLi4vY29uc3RhbnRzL2RhdGEtcGlwZS5jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBUZW1wZXJhdHVyZUNvbnZlcnNpb24gfSBmcm9tICcuLi9jb252ZXJzaW9uL3RlbXBlcmF0dXJlLmNvbnZlcnNpb24nO1xyXG5cclxuXHJcbkBQaXBlKHtcclxuICBuYW1lOiAnZGF0YVBpcGVzJ1xyXG59KVxyXG5cclxuLyoqXHJcbiAqIFBpcGVzIGZvciBkYXRhZ3JpZCB2YWx1ZXNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBEYXRhUGlwZXMgaW1wbGVtZW50cyBQaXBlVHJhbnNmb3JtIHtcclxuICB0cmFuc2Zvcm0odmFsdWU6IGFueSwgYXJncz86IGFueSk6IGFueSB7XHJcbiAgICBpZiAoIWFyZ3MpIHtcclxuICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGRhdGUgTS9kL1lZWVlcclxuICAgICAqL1xyXG4gICAgaWYgKGFyZ3MudG9Mb3dlckNhc2UoKSA9PT0gRGF0YVBpcGVDb25zdGFudHMuUElQRV9TSE9SVERBVEUpIHtcclxuICAgICAgY29uc3QgcGlwZSA9IG5ldyBEYXRlUGlwZSgnZW4tVVMnKTtcclxuICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSBwaXBlLnRyYW5zZm9ybSh2YWx1ZSwgRGF0YVBpcGVDb25zdGFudHMuREFURV9TSE9SVERBVEUpO1xyXG4gICAgICByZXR1cm4gdHJhbnNmb3JtZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gZGF0ZVxyXG4gICAgICovXHJcbiAgICBpZiAoYXJncy50b0xvd2VyQ2FzZSgpID09PSBEYXRhUGlwZUNvbnN0YW50cy5QSVBFX0RBVEUpIHtcclxuICAgICAgY29uc3QgcGlwZSA9IG5ldyBEYXRlUGlwZSgnZW4tVVMnKTtcclxuICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSBwaXBlLnRyYW5zZm9ybSh2YWx1ZSwgRGF0YVBpcGVDb25zdGFudHMuREFURV9GTVQpO1xyXG4gICAgICByZXR1cm4gdHJhbnNmb3JtZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gZGF0ZSBNTU0gZCwgeVxyXG4gICAgICovXHJcbiAgICBpZiAoYXJncy50b0xvd2VyQ2FzZSgpID09PSBEYXRhUGlwZUNvbnN0YW50cy5QSVBFX01FRElVTURBVEUpIHtcclxuICAgICAgY29uc3QgcGlwZSA9IG5ldyBEYXRlUGlwZSgnZW4tVVMnKTtcclxuICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSBwaXBlLnRyYW5zZm9ybSh2YWx1ZSwgJ01NTSBkLCB5Jyk7XHJcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBkYXRlICdFRUVFLCBNTU1NIGQsIHknXHJcbiAgICAgKi9cclxuICAgIGlmIChhcmdzLnRvTG93ZXJDYXNlKCkgPT09IERhdGFQaXBlQ29uc3RhbnRzLlBJUEVfRlVMTERBVEUpIHtcclxuICAgICAgY29uc3QgcGlwZSA9IG5ldyBEYXRlUGlwZSgnZW4tVVMnKTtcclxuICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSBwaXBlLnRyYW5zZm9ybSh2YWx1ZSwgRGF0YVBpcGVDb25zdGFudHMuREFURV9GVUxMREFURSk7XHJcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBkYXRlIGZyb20gZXBvY2ggdmFsdWVcclxuICAgICAqL1xyXG4gICAgaWYgKGFyZ3MudG9Mb3dlckNhc2UoKSA9PT0gRGF0YVBpcGVDb25zdGFudHMuUElQRV9FUE9DSCkge1xyXG4gICAgICBjb25zdCBwaXBlID0gbmV3IERhdGVQaXBlKCdlbi1VUycpO1xyXG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IHBpcGUudHJhbnNmb3JtKHZhbHVlICogMTAwMCwgRGF0YVBpcGVDb25zdGFudHMuREFURV9EQVlfVElNRSk7XHJcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBudW1iZXIgd2l0aCBkZWNpbWFsXHJcbiAgICAgKi9cclxuICAgIGlmIChhcmdzLnRvTG93ZXJDYXNlKCkgPT09IERhdGFQaXBlQ29uc3RhbnRzLlBJUEVfTlVNQkVSKSB7XHJcbiAgICAgIGNvbnN0IHBpcGUgPSBuZXcgRGVjaW1hbFBpcGUoJ2VuLVVTJyk7XHJcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gcGlwZS50cmFuc2Zvcm0odmFsdWUsICcxLjAtMCcpO1xyXG4gICAgICByZXR1cm4gdHJhbnNmb3JtZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gcmV0dXJuIG51bWJlciB3aXRoIG1waCBhcHBlbmRlZFxyXG4gICAgICovXHJcbiAgICBpZiAoYXJncy50b0xvd2VyQ2FzZSgpID09PSBEYXRhUGlwZUNvbnN0YW50cy5QSVBFX01QSCkge1xyXG4gICAgICBjb25zdCBwaXBlID0gbmV3IERlY2ltYWxQaXBlKCdlbi1VUycpO1xyXG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IHBpcGUudHJhbnNmb3JtKHZhbHVlLCAnMS4wLTAnKTtcclxuICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkICsgJyBtcGgnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHBlcmNlbnRhZ2VcclxuICAgICAqL1xyXG4gICAgaWYgKGFyZ3MudG9Mb3dlckNhc2UoKSA9PT0gRGF0YVBpcGVDb25zdGFudHMuUElQRV9QRVJDRU5UQUdFKSB7XHJcbiAgICAgIGNvbnN0IHBpcGUgPSBuZXcgUGVyY2VudFBpcGUoJ2VuLVVTJyk7XHJcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gcGlwZS50cmFuc2Zvcm0odmFsdWUpO1xyXG4gICAgICByZXR1cm4gdHJhbnNmb3JtZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gcGVyY2VudGFnZVxyXG4gICAgICovXHJcbiAgICBpZiAoYXJncy50b0xvd2VyQ2FzZSgpID09PSBEYXRhUGlwZUNvbnN0YW50cy5QSVBFX1BFUkNFTlRBR0VfREVDSU1BTCkge1xyXG4gICAgICBjb25zdCBwaXBlID0gbmV3IFBlcmNlbnRQaXBlKCdlbi1VUycpO1xyXG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IHBpcGUudHJhbnNmb3JtKHZhbHVlLCAnMi4yLTInKTtcclxuICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHBlcmNlbnRhZ2Ugd2l0aCB0d28gZGVjaW1hbHNcclxuICAgICAqL1xyXG4gICAgaWYgKGFyZ3MudG9Mb3dlckNhc2UoKSA9PT0gRGF0YVBpcGVDb25zdGFudHMuUElQRV9ERUNJTUFMX1RXTykge1xyXG4gICAgICBjb25zdCBwaXBlID0gbmV3IERlY2ltYWxQaXBlKCdlbi1VUycpO1xyXG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IHBpcGUudHJhbnNmb3JtKHZhbHVlLCAnMS4yLTInKTtcclxuICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHBlcmNlbnRhZ2Ugd2l0aCBmb3VyIGRlY2ltYWxzXHJcbiAgICAgKi9cclxuICAgIGlmIChhcmdzLnRvTG93ZXJDYXNlKCkgPT09IERhdGFQaXBlQ29uc3RhbnRzLlBJUEVfREVDSU1BTF9GT1VSKSB7XHJcbiAgICAgIGNvbnN0IHBpcGUgPSBuZXcgRGVjaW1hbFBpcGUoJ2VuLVVTJyk7XHJcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gcGlwZS50cmFuc2Zvcm0odmFsdWUsICcxLjQtNCcpO1xyXG4gICAgICByZXR1cm4gdHJhbnNmb3JtZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGVtcGVyYXR1cmUgaW4gZmFocmVuaGVpdCwgYXBwZW5kIMKwRlxyXG4gICAgICovXHJcbiAgICBpZiAoYXJncy50b0xvd2VyQ2FzZSgpID09PSBEYXRhUGlwZUNvbnN0YW50cy5QSVBFX1RFTVBfRkFIUkVOSEVJVCkge1xyXG4gICAgICBjb25zdCBwaXBlID0gbmV3IERlY2ltYWxQaXBlKCdlbi1VUycpO1xyXG4gICAgICAvLyBjb25zdCB0ZW1wZXJhdHVyZSA9ICh2YWx1ZSAqIDMyKSArIDEuODtcclxuICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSBwaXBlLnRyYW5zZm9ybSh2YWx1ZSwgJzEuMC0wJyk7XHJcblxyXG4gICAgICByZXR1cm4gdHJhbnNmb3JtZWQgKyAnIMKwRic7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGVtcGVyYXR1cmUgaW4ga2VsdmluLCBhcHBlbmQgwrBLXHJcbiAgICAgKi9cclxuICAgIGlmIChhcmdzLnRvTG93ZXJDYXNlKCkgPT09IERhdGFQaXBlQ29uc3RhbnRzLlBJUEVfVEVNUF9LRUxWSU4pIHtcclxuICAgICAgY29uc3QgcGlwZSA9IG5ldyBEZWNpbWFsUGlwZSgnZW4tVVMnKTtcclxuICAgICAgLy8gY29uc3QgdGVtcGVyYXR1cmUgPSAodmFsdWUgKiAzMikgKyAxLjg7XHJcbiAgICAgIGNvbnN0IHRlbXBlcmF0dXJlID0gVGVtcGVyYXR1cmVDb252ZXJzaW9uLkZhaHJlbmhlaXRUb0tlbHZpbih2YWx1ZSk7XHJcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gcGlwZS50cmFuc2Zvcm0odGVtcGVyYXR1cmUsICcxLjAtMCcpO1xyXG5cclxuICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkICsgJyDCsEsnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHRlbXBlcmF0dXJlIGluIGNlbHNpdXMsIGFwcGVuZCDCsENcclxuICAgICAqL1xyXG4gICAgaWYgKGFyZ3MudG9Mb3dlckNhc2UoKSA9PT0gRGF0YVBpcGVDb25zdGFudHMuUElQRV9URU1QX0NFTFNJVVMpIHtcclxuICAgICAgY29uc3QgcGlwZSA9IG5ldyBEZWNpbWFsUGlwZSgnZW4tVVMnKTtcclxuICAgICAgY29uc3QgdGVtcGVyYXR1cmUgPSBUZW1wZXJhdHVyZUNvbnZlcnNpb24uRmFocmVuaGVpdFRvQ2Vsc2l1cyh2YWx1ZSk7XHJcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gcGlwZS50cmFuc2Zvcm0odGVtcGVyYXR1cmUsICcxLjAtMCcpO1xyXG5cclxuICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkICsgJyDCsEMnO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIElGIG5vbmUgb2YgdGhlIGFib3ZlIHdvcmssIHJldHVybiB0aGUgb3JpZ2luYWwgdmFsdWVcclxuICAgICAqL1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH1cclxufVxyXG4iXX0=